<h1>EC2 Tips</h1>

<ul>
  <li>On Demand
    <ul>
      <li>Users that want the low cost and flexibility of EC2 without up front payment or long term commitment.</li>
      <li>Applications with short term, spiky, or unpredictable workloads that can't be interrupted.</li>
      <li>Apps being developed or tested on EC2 for the first time.</li>
    </ul>
  </li>
  <li>Reserved
    <ul>
      <li>Apps with staedy state or predictable usage</li>
      <li>Apps that require reserved capacity</li>
      <li>Users are able to make upfront payments to reduce their total computing costs</li>
    </ul>
  </li>
  <li>Spot
    <ul>
      <li>Apps that flexible start/end times</li>
      <li>Apps that are only feasible at very low compute prices</li>
      <li>Users with urgent computing needs for large amounts of additional capacity</li>
    </ul>
  </li>
  <li>Dedicated Hosts
    <ul>
      <li>Useful for regulatory requirements that may not support multi-tenant virtualization</li>
      <li>Great for licensing which does not support multi-tenancy or cloud deployments</li>
      <li>Can be purchased on demand (hourly)</li>
      <li>Can be purchased as a reservation for up to 70% off the on-demand price.</li>
    </ul>
  </li>
</ul>

<p>If spot instances are terminated by Amazon due to price change, you will not be charged for that hour. However, if you terminate it, you will be charged for that hour.</p>

<p>EC2 instance levels:</p>
<ul>
  <li>T - cheap</li>
  <li>D - density</li>
  <li>F - Field Programmable Gate Array</li>
  <li>R - RAM</li>
  <li>G - graphics</li>
  <li>C - compute</li>
  <li>I - IOPS (input/output operations per second)</li>
  <li>M - main choice for general purpose</li>
  <li>X - eXtreme memory</li>
  <li>P - graphics (think pics)</li>
</ul>

<p>Instance types:</p>
<ul>
  <li>t2 - low cost, general purpose. used for web servers, small dbs.</li>
  <li>m4 - general purpose. used for app servers.</li>
  <li>m3 - general purpose, used for app servers.</li>
  <li>c4 - compute optimized, cpu intensive apps/dbs.</li>
  <li>c3 - compute optimized, cpu intensive apps/dbs.</li>
  <li>r3 - memory optimized, memory intensive apps/dbs</li>
  <li>g2 - graphics/general purpose gpu. video encoding, machine learning, 3d app streaming</li>
  <li>i2 - high speed storage, nosql dbs, data warehousing</li>
  <li>f1 - field programmable gate array. hardware acceleration for your code. Can change underlying hardware to suit your code.</li>
  <li>d2 - dense storage. used for file servers, data warehousing, hadoop</li>
  <li>p2 - graphics and general purpose. machine learning, bit coin mining</li>
  <li>x1 - memory optimized. For SAP HANA/Apache Spark, etc.</li>
</ul>

<h3>Elastic Block Storage (EBS)</h3>
<p>Allows you to create storage volumes create storage volumes and attach them to EC2 instances. Once attached, you can create a file system on them, run a DB, or use them in any other way you would use a block device. EBS volumes are placed in a specific Availability Zone, where they are automatically repliced to protect you from the failure of a single component.</p>
<h4>EBS Volume Types</h4>
<ul>
  <li>General Purpose SSD (GP3)
    <ul>
      <li>General purpose, balances both price and performance.</li>
      <li>Ratio of 3 IOPS per GB with up to 10,000 IOPS and the ability to burst up to 3,000 IOPS for extended periods of time for volumes under 1GB.</li>
    </ul>
  </li>
  <li>Provisioned IOPS SSD (IO1)
    <ul>
      <li>Designed for I/O intensive applications such as large relational or NoSQL databases.</li>
      <li>Use if you need more than 10,000 IOPS.</li>
      <li>Can provision up to 20,000 IOPS</li>
    </ul>
  </li>
  <li>Throughput Optimized HDD (ST1)
    <ul>
      <li>Big data</li>
      <li>Data warehouses</li>
      <li>Log processing</li>
      <li>Cannot be a boot volume</li>
    </ul>
  </li>
  <li>Cold HDD (SC1)
    <ul>
      <li>Lowest cost storage for infrequently accessed workloads.</li>
      <li>File server</li>
      <li>Cannot be a boot volume</li>
    </ul>
  </li>
  <li>Magnetic (Standard)
    <ul>
      <li>Lowest cost per GB of all EBS volume types that is bootable.</li>
      <li>Ideal for workloads where data is accessed infrequently and applications where the lowest storage cost is important.</li>
    </ul>
  </li>
</ul>

<h3>Status Checks</h3>
<ul>
  <li>System Status Check - checks network connectivity, verifies that AWS is able to get network packets to the instance. Does not validate that the OS and applications are accepting traffic.</li>
  <li>Instance Status Check - ensures that instance OS is accepting traffic.</li>
</ul>

<h3>Volume Encryption</h3>
<p>When provisioning an instance, you can add additional volumes. These will give the option to be encrypted. But the Root volume will not give this option. Root volume can be encrypted, but you must provision them first, create an AMI of that instance, and while copying that encrypt the root device volume.</p>

<ul>
  <li>Termination proectection is turned off by default. If turned on, the instance cannot be terminated from the console without first disabling termination protection.</li>
  <li>On an EBS backed instance, the default action is for the root EBS volume to be deleted when instance is terminated.</li>
</ul>

<h3>Volumes and Snapshots</h3>
<ul>
  <li>Volumes exist on EBS and are like a virtual hard disk. Can not be attached to multiple instances.</li>
  <li>Snapshots exist on S3
    <ul>
      <li>Can take a snapshot of a volume and store it on S3</li>
      <li>Snapshots are point in time copies of volumes.</li>
      <li>Snapshots are incremental, this means that only the blocks that have changed since last snapshot are moved to S3.</li>
      <li>If this is you first snapshot, it mayuu take some time to create.</li>
    </ul>
  </li>
</ul>
<p>When taking a snapshot of an EBS volume that serves as root, you should first stop the instance. If you don't, AWS will stop it automatically before taking the snapshot.</p>

<h3>Elastic Load Balancers</h3>
<ul>
  <li>Never have a static IP address, only a DNS name which resolve to a dynamic IP.</li>
</ul>

<h3>Roles</h3>
<p>Can only assign a role to an instance at creation. It cannot be added later. You can however modify the policy of an IAM role already assigned to an EC2 instance. Roles are much more secure than storying your access key and secret access key on the EC2 instances. If a hacker gains access to your EC2 instance he can then copy your secret access key and use it to login from anywhere. Also, if you need to revoke access to a user, you'd have to login to each EC2 instance the user had access to and update the SSH keys. Using roles makes it much easier to revoke access to a user.</p>
<p>Roles are universal and can be used in any region.</p>